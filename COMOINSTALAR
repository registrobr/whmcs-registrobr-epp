
Para informações não contidas neste texto por favor verifique https://github.com/registrobr/whmcs-registrobr-epp/.

Suporte comunitário em língua portuguesa pode ser obtido em um destes fóruns:
- https://eng.registro.br/mailman/listinfo/eppnicbr
- http://portaldohost.com.br/forum/

REQUISITOS

- WHMCS versão 8.6 ou superior (testado apenas com WHMCS 8.7.2)
- Todos as dependências do WHMCS (incluindo ionCube loader)
- Ambiente POSIX (Linux, FreeBSD e demais atendem este requisito)
- PHP versão 8.1 ou superior (testado apenas com PHP 8.1)
- Suporte a SSL/TLS
- Ambiente exclusivo (VPS ou dedicado) para armazenamento seguro da chave privada SSL
- Permissão de firewall para portas TCP 443 e TCP 700 nos servidores beta.registro.br,
registro.br e epp.registro.br
- Data correta no servidor (NTP recomendado mas não obrigatório; veja https://ntp.br para mais informações)


INSTALAÇÃO

Copiar o conteúdo dos diretórios em whmcs a pasta do WHMCS (ex: sudo cp -R whmcs /var/www)
Notar que se já houverem arquivos whois.json e additionalfields.php no
diretório $WHMCS/resources/domains, ao invés de copiar deve-se fazer adição do conteúdo
Caso já hajam arquivos em $WHMCS/modules/registrars/registrobr, basta sobrescrever.

- Formatador de CNPJ e CPF (opcional)

Para formatar automaticamente nos formatos NNN.NNN.NNN-NN e NN.NNN.NNN/NNNN-NN enquanto o cliente digita.
Na tela de checkout de registro de domínio, o CPF e CNPJ irão ser formatados automaticamente enquanto o usuário digita.

No arquivo `additionalfields.php`, mantenha o `<input type='hidden' id='cpf-cnpj-rgbr-formatter'><br />`, dentro de `Description`. Não se preocupe, o <input> não irá aparecer na tela.



CONFIGURAÇÃO

1) No painel de controle do WHMCS, vá até linha do topo, clique em "Setup"

2) Clique então em "Products/Services" => "Domain Registrars"

3) Ative o módulo do Registro.br e depois em Configure.

4) Preencha os seus dados de autenticação do ambiente beta.registro.br. Notar que Username se trata do número do provedor
EPP (ex: 001) e não do ID do provedor (ex: FAN). Por enquanto deixe a opção TestMode ativada. O certificado para utilização da
   beta.registro.br já vem como parte da distribuição do módulo.

5) O preenchimento de TechC é opcional; sem ele os domínios são criados com contato
técnico igual ao titular. O contato técnico só poderá alterar o domínio se for feita remoção do provedor de serviço, mas sempre aparecerá no WHOIS/RDAP.

6)  Para o correto processamento das mensagens de retorno("Poll") é necessário
configurar Cron (Menu System, Opção Automation) e também departamentos de suporte no WHMCS e atribuir usuários a eles.
Na opção "Sender Username", utilize um Username que esteja em sua lista de
administradores ('../whmcs/admin/configadmins.php'), tal como root, ou cadastre um.

7) Sugerimos muito fortemente que seja habilitado o módulo de log
em Utilities -> Log -> Module Log mesmo para uso em produção, para facilitar
o diagnóstico de
problemas reportados por clientes. Assim, não será necessário solicitar ao cliente
que refaça uma transação para que seja diagnosticado um problema.

8) Apesar do módulo criar os TLDs de todas as categorias do .br que não tenham requisitos adicionais, no ambiente beta.registro.br devem ser usados apenas
os TLDs .com.br (CPF ou CNPJ) e .eng.br (apenas CPF)

Para testes de software verificar mais detalhes no arquivo TESTES


ATIVAÇÃO EM PRODUÇÃO

- Gere uma requisição de certificado como descrito em https://registro.br/tecnologia/provedores-de-hospedagem/epp/solicitacao-certificado/
- Envie o CSR para epp@registro.br, sem enviar a chave privada
- Copie o certificado recebido e a chave privada em unico arquivo .pem 
- Copie o arquivo .pem gerado para uma área fora do diretório de documentos do servidor Web
- Na administração do WHMCS -> Setup -> General Settings -> Domain Registrars ->
Registro.br, colocar a opção TESTMODE como produção , preencher usuário e senha para as informações
de produção, informar o diretório onde o certificado foi copiado e a pass-phrase do certificado
